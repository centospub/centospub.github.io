<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
		<meta name="description" content="CentOS服务器构建">
		<meta name="keywords" content="Centos, 服务器构建, Server, 服务器, Enterprise, Linux, news, software, download, downloads, free, community, forums, bulletin, boards, open, source, opensource, gpl, UNIX, web site, weblog, blogs, ISO, FAQ, whitebox, WBEL, WBL, taolinux" />
	<title>CentOS Pub  --- 纯中文 CentOS 攻略站</title>
		<link rel="stylesheet" type="text/css" href="../css/centospub.css">
		<link rel="stylesheet" type="text/css" href="make.css">
</head>


	<body>
	<div id="docs-header">
			<a href="http://www.centospub.com"><img src="../images/logo.gif" border="0" id="docs-rhlogo"></a> 
			<a name="top" id="top"></a>
			<table class="tab-set" cellspacing="0" cellpadding="0">
				<tr>
					<td>
					</td>
					<td class="tab-label"><a href="../index.html">前　言</a></td>
					<td class="tab-end"></td>

					<td class="tab-spacer"></td>

					<td class="tab-label"><a href="../prep.html">预　习</a></td>
					<td class="tab-end"></td>

					<td class="tab-spacer"></td>

					<td class="current-tab-label"><a href="../make.html">配置详解</a></td> 
					<td class="current-tab-end"></td>

					<td class="tab-spacer"></td>

					<td class="tab-label"><a href="http://www.centospub.com/bbs" target="_blank">技术论坛</a></td> 
					<td class="tab-end"></td>

					<td class="tab-spacer"></td>

					<td class="tab-label"><a href="../whatsnew.html">最近更新</a></td> 
					<td class="tab-end"></td>

					<td class="tab-spacer"></td>

					<td class="tab-label"><a href="../about.html">About</a></td> 
					<td class="tab-end"></td>

					<td class="tab-spacer"></td>

				</tr>
			</table>
	<a href="../about.html"></a>	  </div>

		<div id="docs-headerbar">
		</div>

	<div id="docs-content">
	  <p><a href="../make.html">&lt;&lt;&lt; 返回［配置详解］索引 </a><br />
            <br />
　　<strong>&lt; 用 SWAT 让 Samba 服务器的管理温和化 &gt;</strong>  （最近更新日：2007/01/29）</p>

          <table width="100%" border="0">
            <tr>
              <td bgcolor="#4665A6"><table  border="0">
                  <tr>
                    <td bgcolor="#333333"><span class="table-title">前　　言</span></td>
                  </tr>
              </table></td>
            </tr>
          </table>
          <br />
          　　SWAT 是通过浏览器对 Samba 进行管理的工具之一。通过 SWAT ，可以在 Samba 允许访问范围内的客户端，用浏览器对服务端的 Samba 进行控制。在线文档的阅览、smb.conf 的确认和编辑，以及密码的变更、服务的重启等等都可以通过 SWAT 来完成，它的直观让 Samba 变得温和化，对那些不喜欢文本界面管理服务器的朋友来说，是一个强大的工具。<br />
          <br />
          <table width="100%" border="0">
            <tr>
              <td bgcolor="#4665A6"><table  border="0">
                  <tr>
                    <td bgcolor="#333333"><span class="table-title">安装 SWAT </span></td>
                  </tr>
              </table></td>
            </tr>
          </table>
          <br />
          　　首先，通过 yum 在线安装 SWAT 。 <br />
          <br />
          <table width="100%" border="2">
            <tr>
              <td bgcolor="#000000"><span class="message">[root@sample ~]# </span><span class="command">yum -y install samba-swat</span><span class="message"><span class="intro">　 ← 在线安装 SWAT </span><br />
              <br />
              Setting up Install Process<br />
              Setting up repositories<br />
              update                    100% |=========================|  951 B    00:00<br />
              base                      100% |=========================| 1.1 kB    00:00<br />
              addons                    100% |=========================|  951 B    00:00<br />
              extras                    100% |=========================| 1.1 kB    00:00<br />
              Reading repository metadata in from local files<br />
              primary.xml.gz            100% |=========================|  74 kB    00:00<br />
              update    : ################################################## 214/214<br />
              Added 2 new packages, deleted 0 old in 0.99 seconds<br />
              Parsing package install arguments<br />
              Resolving Dependencies<br />
              --&gt; Populating transaction set with selected packages. Please wait.<br />
              ---&gt; Downloading header for samba-swat to pack into transaction set.<br />
              samba-swat-3.0.10-1.4E.9. 100% |=========================|  87 kB    00:00<br />
              ---&gt; Package samba-swat.i386 0:3.0.10-1.4E.9 set to be updated<br />
              --&gt; Running transaction check </span>
                <p class="message">Dependencies Resolved</p>
                <p class="message">=============================================================================<br />
                Package                 Arch       Version          Repository        Size<br />
                =============================================================================<br />
                Installing:<br />
                samba-swat              i386       3.0.10-1.4E.9    base              6.5 M</p>
                <p class="message">Transaction Summary<br />
                =============================================================================<br />
                Install      1 Package(s)<br />
                Update       0 Package(s)<br />
                Remove       0 Package(s)<br />
                Total download size: 6.5 M<br />
                Downloading Packages:<br />
                (1/1): samba-swat-3.0.10- 100% |=========================| 6.5 MB    00:20<br />
                Running Transaction Test<br />
                Finished Transaction Test<br />
                Transaction Test Succeeded<br />
                Running Transaction<br />
                Installing: samba-swat                   ######################### [1/1]</p>
                <span class="message">Installed: samba-swat.i386 0:3.0.10-1.4E.9<br />
                Complete!</span><br />
              </td>
            </tr>
          </table>
          <br />
          <table width="100%" border="0">
            <tr>
              <td bgcolor="#4665A6"><table  border="0">
                  <tr>
                    <td bgcolor="#333333"><span class="table-title">配置 SWAT </span></td>
                  </tr>
              </table></td>
            </tr>
          </table>
          <p>　　然后编辑 /etc/xinetd.d/swat ，对其进行配置。本文的原则是只允许内网以及本地的客户端对 SWAT 进行访问。          </p>
          <table width="100%" border="2">
            <tr>
              <td bgcolor="#000000" class="message">[root@sample ~]# <span class="command">vi /etc/xinetd.d/swat</span><span class="intro">　 ← 编辑 SWAT 的配置文件 </span><br />
              <br />
only_from       = 127.0.0.1<span class="intro">　 ← 找到此行，在下面添加如下行：</span><br />
        <span class="after">only_from       = 192.168.0.0</span><span class="intro">　 ← 添加此行，只允许内网范围对 SWAT 进行访问 </span><br />
        <br />
        <span class="before">disable         = yes</span><span class="intro">　 ← 找到此行，将 yes 改为 no </span><br />
<br />
<span class="after">disable         = no<span class="intro">　 ← 变为此状态</span></span></td>
            </tr>
          </table>
          <br />
          <table width="100%" border="0">
            <tr>
              <td bgcolor="#4665A6"><table  border="0">
                  <tr>
                    <td bgcolor="#333333"><span class="table-title">启动 SWAT </span></td>
                  </tr>
              </table></td>
            </tr>
          </table>
          <br />
          　　在启动 SWAT 之前，先将防火墙中 SWAT 使用的 901 号端口开放。<br />
          <br />
          <table width="100%" border="2">
            <tr>
              <td bgcolor="#000000" class="message">[root@sample ~]# <span class="command">vi /etc/sysconfig/iptables</span><span class="intro">　 ← 编辑防火墙规则 </span><br />
                <br />
                -A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 445 -j ACCEPT<span class="intro">　 ← 找到此行，在下面添加如下行：</span><br />
                <span class="after">-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 901 -j ACCEPT</span><span class="intro">　 ← 添加此行开放SWAT的901端口</span><br />
              <br />
              [root@sample ~]# <span class="command">/etc/rc.d/init.d/iptables restart</span><span class="intro">　 ← 重新启动防火墙，使新的规则生效</span><br />
              <br />
              Flushing firewall rules:                                   　　　　　　　　　[  <span class="after">OK</span>  ]<br />
              Setting chains to policy ACCEPT: filter                    　　[  <span class="after">OK</span>  ]<br />
              Unloading iptables modules:　　　　　　                                [  <span class="after">OK</span>  ]<br />
              Applying iptables firewall rules:　　　　　                          [  <span class="after">OK</span>  ]</td>
            </tr>
          </table>
          <br />
          　　由于 SWAT 的启动是通过超级服务器，所以只要重新启动  xinetd 即可启动 SWAT 。<br />
          <br />
          <table width="100%" border="2">
            <tr>
              <td bgcolor="#000000" class="message">[root@sample ~]# <span class="command">/etc/rc.d/init.d/xinetd restart<span class="intro">　 ← 重新启动超级服务器，启动 SWAT </span><br />
              </span><br />
                Stopping xinetd:                                           　　　　　　　　　　　[  <span class="after">OK</span>  ]<br />
              Starting xinetd:                                           　　　　　　　　　　　[  <span class="after">OK</span>  ]</td>
            </tr>
          </table>
          <br />
          <table width="100%" border="0">
            <tr>
              <td bgcolor="#4665A6"><table  border="0">
                  <tr>
                    <td bgcolor="#333333"><span class="table-title">测试 SWAT </span></td>
                  </tr>
              </table></td>
            </tr>
          </table>
          <p>　　
          在服务端启动 SWAT   
      后，我们就可以通过 SWAT 允许范围（本文以内网192.168.0.0及本地127.0.0.1为例）
      内的客户机的浏览器中，通过 http://服务器的内网IP:901 来访问服务端的
      SWAT 了。如下所示：<br />
      <br />
      1、在浏览器中输入“http://服务器的内网IP:901”（本文以笔者测试环境的“http://192.168.0.9:901”为例。请各自替换为您的服务器内网IP地址。），然后输入 root 用户的用户名及密码进入 SWAT 的管理首页； <br />
      <br />
      <img src="samba/swat01.gif" width="780" height="587" /><br />
      <br />
      2、确认出现如下 SWAT 管理中心的首页：<br />
      <br />
      <img src="samba/swat02.gif" width="780" height="587" /></p>
      <p>　　通过 SWAT 管理 Samba 与直接修改 smb.conf 的方式，在本质上并无差异，但通过浏览器访问的方式，可以使 Samba 的管理更加温和化，更加适用于不擅长使用文本界面、直接修改配置文件的朋友。<br />
          </p>
          <table width="100%" border="0">
            <tr>
              <td align="right"><a href="#top">&lt;&lt;&lt; 返回顶端</a></td>
            </tr>
          </table>
          <hr>

		<div id="docs-footer">
			Copyright &copy; Chao Chen , All rights reserved .<br>
		    <br>
	</div>
	</div>
	</body>
</html>       
